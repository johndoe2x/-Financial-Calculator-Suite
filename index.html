<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Financial Calculator</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #0f0f0f 0%, #1a1a1a 100%);
            color: #e0e0e0;
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
        }

        header {
            text-align: center;
            margin-bottom: 40px;
            padding: 20px 0;
            border-bottom: 2px solid #00d4ff;
        }

        h1 {
            font-size: 2.5em;
            color: #00d4ff;
            margin-bottom: 10px;
            text-shadow: 0 0 20px rgba(0, 212, 255, 0.3);
        }

        .subtitle {
            color: #888;
            font-size: 1.1em;
        }

        .tabs-container {
            display: flex;
            gap: 10px;
            margin-bottom: 30px;
            border-bottom: 2px solid #333;
            flex-wrap: wrap;
        }

        .tab-button {
            padding: 12px 25px;
            background: transparent;
            border: 2px solid #00d4ff;
            border-bottom: none;
            border-radius: 8px 8px 0 0;
            color: #00d4ff;
            cursor: pointer;
            font-size: 1em;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 1px;
            transition: all 0.3s ease;
            width: auto;
            margin-top: 0;
        }

        .tab-button:hover {
            background: rgba(0, 212, 255, 0.1);
        }

        .tab-button.active {
            background: linear-gradient(135deg, #00d4ff 0%, #00ff88 100%);
            color: #0f0f0f;
            border-bottom: 2px solid #00ff88;
        }

        .tab-content {
            display: none;
            animation: fadeIn 0.3s ease;
        }

        .tab-content.active {
            display: block;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .main-content {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin-bottom: 40px;
        }

        .card {
            background: linear-gradient(135deg, #1a1a1a 0%, #252525 100%);
            border: 1px solid #00d4ff;
            border-radius: 12px;
            padding: 25px;
            box-shadow: 0 8px 32px rgba(0, 212, 255, 0.1);
        }

        .card h2 {
            color: #00d4ff;
            margin-bottom: 20px;
            font-size: 1.5em;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .input-group {
            margin-bottom: 20px;
        }

        label {
            display: block;
            margin-bottom: 8px;
            color: #00d4ff;
            font-weight: 600;
            font-size: 0.95em;
        }

        input {
            width: 100%;
            padding: 12px 15px;
            background: #0f0f0f;
            border: 2px solid #00d4ff;
            border-radius: 6px;
            color: #00d4ff;
            font-size: 1em;
            transition: all 0.3s ease;
        }

        input:focus {
            outline: none;
            border-color: #00ff88;
            box-shadow: 0 0 15px rgba(0, 255, 136, 0.3);
        }

        input::placeholder {
            color: #555;
        }

        button {
            width: 100%;
            padding: 12px;
            background: linear-gradient(135deg, #00d4ff 0%, #00ff88 100%);
            border: none;
            border-radius: 6px;
            color: #0f0f0f;
            font-size: 1.05em;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s ease;
            text-transform: uppercase;
            letter-spacing: 1px;
            margin-top: 10px;
        }

        button:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 30px rgba(0, 212, 255, 0.4);
        }

        button:active {
            transform: translateY(0);
        }

        .stats-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin-top: 20px;
        }

        .stat-box {
            background: #0f0f0f;
            border: 1px solid #00d4ff;
            border-radius: 8px;
            padding: 15px;
            text-align: center;
        }

        .stat-label {
            color: #888;
            font-size: 0.9em;
            margin-bottom: 5px;
            text-transform: uppercase;
        }

        .stat-value {
            color: #00ff88;
            font-size: 1.5em;
            font-weight: bold;
        }

        .negative {
            color: #ff4444;
        }

        .positive {
            color: #00ff88;
        }

        .chart-container {
            background: linear-gradient(135deg, #1a1a1a 0%, #252525 100%);
            border: 1px solid #00d4ff;
            border-radius: 12px;
            padding: 25px;
            box-shadow: 0 8px 32px rgba(0, 212, 255, 0.1);
            margin-bottom: 30px;
        }

        .chart-container h2 {
            color: #00d4ff;
            margin-bottom: 20px;
            font-size: 1.5em;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .table-container {
            background: linear-gradient(135deg, #1a1a1a 0%, #252525 100%);
            border: 1px solid #00d4ff;
            border-radius: 12px;
            padding: 25px;
            box-shadow: 0 8px 32px rgba(0, 212, 255, 0.1);
            overflow-x: auto;
            margin-bottom: 30px;
        }

        .table-container h2 {
            color: #00d4ff;
            margin-bottom: 20px;
            font-size: 1.5em;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        table {
            width: 100%;
            border-collapse: collapse;
        }

        thead {
            background: #0f0f0f;
        }

        th {
            color: #00d4ff;
            padding: 15px;
            text-align: left;
            border-bottom: 2px solid #00d4ff;
            font-weight: 700;
            text-transform: uppercase;
            font-size: 0.9em;
        }

        td {
            padding: 12px 15px;
            border-bottom: 1px solid #333;
            color: #e0e0e0;
        }

        tbody tr:hover {
            background: rgba(0, 212, 255, 0.1);
        }

        tbody tr:last-child td {
            border-bottom: none;
        }

        .highlight {
            color: #00ff88;
            font-weight: 600;
        }

        .warning {
            color: #ff9800;
        }

        @media (max-width: 768px) {
            .main-content {
                grid-template-columns: 1fr;
            }

            h1 {
                font-size: 1.8em;
            }

            .stats-grid {
                grid-template-columns: 1fr;
            }

            table {
                font-size: 0.85em;
            }

            th, td {
                padding: 8px;
            }

            .tabs-container {
                flex-direction: column;
            }

            .tab-button {
                width: 100%;
                border-radius: 8px;
            }
        }

        .info-box {
            background: rgba(0, 212, 255, 0.1);
            border-left: 4px solid #00d4ff;
            padding: 15px;
            margin-top: 15px;
            border-radius: 4px;
            font-size: 0.95em;
            color: #b0b0b0;
        }

        .info-icon {
            color: #00d4ff;
            margin-right: 8px;
        }

        .expense-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-bottom: 30px;
        }

        .expense-stat-box {
            background: #0f0f0f;
            border: 1px solid #00d4ff;
            border-radius: 8px;
            padding: 20px;
            text-align: center;
        }

        .expense-stat-label {
            color: #888;
            font-size: 0.85em;
            margin-bottom: 8px;
            text-transform: uppercase;
        }

        .expense-stat-value {
            color: #00ff88;
            font-size: 1.8em;
            font-weight: bold;
            margin-bottom: 5px;
        }

        .expense-stat-subtext {
            color: #666;
            font-size: 0.85em;
        }

        .sip-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
            gap: 15px;
            margin-bottom: 30px;
        }

        .sip-stat-box {
            background: #0f0f0f;
            border: 2px solid #00d4ff;
            border-radius: 8px;
            padding: 25px;
            text-align: center;
            transition: all 0.3s ease;
        }

        .sip-stat-box:hover {
            border-color: #00ff88;
            box-shadow: 0 0 15px rgba(0, 255, 136, 0.2);
        }

        .sip-stat-label {
            color: #888;
            font-size: 0.8em;
            margin-bottom: 10px;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .sip-stat-value {
            color: #00ff88;
            font-size: 2em;
            font-weight: bold;
            margin-bottom: 8px;
        }

        .sip-stat-subtext {
            color: #666;
            font-size: 0.8em;
        }

        .retirement-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .retirement-stat-box {
            background: #0f0f0f;
            border: 2px solid #ff9800;
            border-radius: 8px;
            padding: 30px;
            text-align: center;
            transition: all 0.3s ease;
        }

        .retirement-stat-box:hover {
            border-color: #ffb74d;
            box-shadow: 0 0 20px rgba(255, 152, 0, 0.3);
        }

        .retirement-stat-label {
            color: #888;
            font-size: 0.8em;
            margin-bottom: 12px;
            text-transform: uppercase;
            letter-spacing: 1px;
            font-weight: 600;
        }

        .retirement-stat-value {
            color: #ff9800;
            font-size: 2.2em;
            font-weight: bold;
            margin-bottom: 8px;
        }

        .retirement-stat-subtext {
            color: #666;
            font-size: 0.8em;
            line-height: 1.4;
        }

        .table-scroll {
            max-height: 600px;
            overflow-y: auto;
            border-radius: 12px;
        }

        .table-scroll::-webkit-scrollbar {
            width: 8px;
        }

        .table-scroll::-webkit-scrollbar-track {
            background: #0f0f0f;
        }

        .table-scroll::-webkit-scrollbar-thumb {
            background: #00d4ff;
            border-radius: 4px;
        }

        .table-scroll::-webkit-scrollbar-thumb:hover {
            background: #00ff88;
        }

        .formula-box {
            background: rgba(255, 152, 0, 0.1);
            border: 2px solid #ff9800;
            border-radius: 8px;
            padding: 20px;
            margin-top: 15px;
            font-family: 'Courier New', monospace;
            font-size: 0.9em;
        }

        .formula-box strong {
            color: #ff9800;
        }

        .formula-label {
            color: #888;
            font-size: 0.85em;
            margin-bottom: 10px;
            text-transform: uppercase;
        }

        .formula-text {
            color: #ffb74d;
            line-height: 1.6;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>üí∞ Financial Calculator Suite</h1>
            <p class="subtitle">Inflation, Expenses, SIP & Retirement Planning</p>
        </header>

        <!-- Tabs -->
        <div class="tabs-container">
            <button class="tab-button active" onclick="switchTab('corpus-tab')">üíº Corpus Depreciation</button>
            <button class="tab-button" onclick="switchTab('expense-tab')">üí∏ Expense Inflation</button>
            <button class="tab-button" onclick="switchTab('sip-tab')">üìà SIP Calculator</button>
            <button class="tab-button" onclick="switchTab('4percent-tab')">üéØ 4% Rule Retirement</button>
        </div>

        <!-- TAB 1: CORPUS DEPRECIATION -->
        <div id="corpus-tab" class="tab-content active">
            <div class="main-content">
                <div class="card">
                    <h2>üìä Input Values</h2>
                    
                    <div class="input-group">
                        <label for="corpus">Initial Corpus (‚Çπ)</label>
                        <input type="number" id="corpus" value="10000000" placeholder="Enter amount in rupees">
                    </div>

                    <div class="input-group">
                        <label for="inflation">Annual Inflation Rate (%)</label>
                        <input type="number" id="inflation" value="6" step="0.1" placeholder="Enter inflation rate">
                    </div>

                    <div class="input-group">
                        <label for="years">Duration (Years)</label>
                        <input type="number" id="years" value="15" placeholder="Enter number of years">
                    </div>

                    <button onclick="calculateInflation()">Calculate</button>

                    <div class="info-box">
                        <span class="info-icon">‚ÑπÔ∏è</span>
                        Values update in real-time as you change the inputs
                    </div>
                </div>

                <div class="card">
                    <h2>üìà Results Summary</h2>
                    
                    <div class="stats-grid">
                        <div class="stat-box">
                            <div class="stat-label">Initial Amount</div>
                            <div class="stat-value" id="initialValue">‚Çπ10,000,000</div>
                        </div>
                        <div class="stat-box">
                            <div class="stat-label">Future Value</div>
                            <div class="stat-value highlight" id="futureValue">‚Çπ13,180,795</div>
                        </div>
                        <div class="stat-box">
                            <div class="stat-label">Inflation Loss</div>
                            <div class="stat-value negative" id="inflationLoss">-‚Çπ3,180,795</div>
                        </div>
                        <div class="stat-box">
                            <div class="stat-label">Loss Percentage</div>
                            <div class="stat-value negative" id="lossPercentage">-31.8%</div>
                        </div>
                    </div>

                    <div class="info-box">
                        <span class="info-icon">üí°</span>
                        The "Future Value" shows what your money will be worth in today's terms after accounting for inflation
                    </div>
                </div>
            </div>

            <div class="chart-container">
                <h2>üìâ Value Depreciation Over Time</h2>
                <div style="position: relative; height: 400px;">
                    <canvas id="depreciationChart"></canvas>
                </div>
            </div>

            <div class="chart-container">
                <h2>üîÑ Annual Inflation Impact</h2>
                <div style="position: relative; height: 400px;">
                    <canvas id="annualChart"></canvas>
                </div>
            </div>

            <div class="table-container">
                <h2>üìã Year-by-Year Breakdown</h2>
                <table>
                    <thead>
                        <tr>
                            <th>Year</th>
                            <th>Nominal Value (‚Çπ)</th>
                            <th>Real Value (‚Çπ)</th>
                            <th>Cumulative Loss (‚Çπ)</th>
                            <th>Loss %</th>
                        </tr>
                    </thead>
                    <tbody id="tableBody">
                    </tbody>
                </table>
            </div>
        </div>

        <!-- TAB 2: EXPENSE INFLATION -->
        <div id="expense-tab" class="tab-content">
            <div class="main-content">
                <div class="card">
                    <h2>üìä Expense Input</h2>
                    
                    <div class="input-group">
                        <label for="monthlyExpense">Current Monthly Expense (‚Çπ)</label>
                        <input type="number" id="monthlyExpense" value="50000" placeholder="Enter monthly expense">
                    </div>

                    <div class="input-group">
                        <label for="expenseInflation">Annual Inflation Rate (%)</label>
                        <input type="number" id="expenseInflation" value="6" step="0.1" placeholder="Enter inflation rate">
                    </div>

                    <div class="input-group">
                        <label for="expenseYears">Duration (Years)</label>
                        <input type="number" id="expenseYears" value="15" placeholder="Enter number of years">
                    </div>

                    <button onclick="calculateExpenseInflation()">Calculate</button>

                    <div class="info-box">
                        <span class="info-icon">‚ÑπÔ∏è</span>
                        See how much you'll need to spend to maintain the same lifestyle
                    </div>
                </div>

                <div class="card">
                    <h2>üìà Expense Summary</h2>
                    
                    <div class="expense-stats">
                        <div class="expense-stat-box">
                            <div class="expense-stat-label">Today's Monthly</div>
                            <div class="expense-stat-value" id="todayMonthly">‚Çπ50,000</div>
                            <div class="expense-stat-subtext">Annual: <span id="todayAnnual">‚Çπ6,00,000</span></div>
                        </div>
                        <div class="expense-stat-box">
                            <div class="expense-stat-label">Future Monthly</div>
                            <div class="expense-stat-value highlight" id="futureMonthly">‚Çπ65,818</div>
                            <div class="expense-stat-subtext">Annual: <span id="futureAnnual">‚Çπ7,89,816</span></div>
                        </div>
                        <div class="expense-stat-box">
                            <div class="expense-stat-label">Monthly Increase</div>
                            <div class="expense-stat-value warning" id="monthlyIncrease">+‚Çπ15,818</div>
                            <div class="expense-stat-subtext">+31.64%</div>
                        </div>
                        <div class="expense-stat-box">
                            <div class="expense-stat-label">Total Cost (15 Yrs)</div>
                            <div class="expense-stat-value" id="totalCost15Yrs">‚Çπ1,18,95,788</div>
                            <div class="expense-stat-subtext">vs Today: ‚Çπ90,00,000</div>
                        </div>
                    </div>

                    <div class="info-box">
                        <span class="info-icon">üí°</span>
                        Your purchasing power decreases as inflation increases. These numbers show what you'll actually need to spend.
                    </div>
                </div>
            </div>

            <div class="chart-container">
                <h2>üìä Monthly Expense Growth Over Time</h2>
                <div style="position: relative; height: 400px;">
                    <canvas id="expenseGrowthChart"></canvas>
                </div>
            </div>

            <div class="chart-container">
                <h2>üìà Annual Expense Comparison</h2>
                <div style="position: relative; height: 400px;">
                    <canvas id="annualExpenseChart"></canvas>
                </div>
            </div>

            <div class="table-container">
                <h2>üìã Monthly & Yearly Expense Breakdown</h2>
                <table>
                    <thead>
                        <tr>
                            <th>Year</th>
                            <th>Monthly Expense (‚Çπ)</th>
                            <th>Annual Expense (‚Çπ)</th>
                            <th>Increase from Today (%)</th>
                            <th>Cumulative Cost (‚Çπ)</th>
                        </tr>
                    </thead>
                    <tbody id="expenseTableBody">
                    </tbody>
                </table>
            </div>
        </div>

        <!-- TAB 3: SIP CALCULATOR -->
        <div id="sip-tab" class="tab-content">
            <div class="main-content">
                <div class="card">
                    <h2>üìä SIP Input</h2>
                    
                    <div class="input-group">
                        <label for="sipAmount">Monthly SIP Amount (‚Çπ)</label>
                        <input type="number" id="sipAmount" value="15000" placeholder="Enter monthly SIP amount">
                    </div>

                    <div class="input-group">
                        <label for="expectedReturn">Expected Annual Return (%)</label>
                        <input type="number" id="expectedReturn" value="15" step="0.1" placeholder="Enter expected return rate">
                    </div>

                    <div class="input-group">
                        <label for="sipYears">Duration (Years)</label>
                        <input type="number" id="sipYears" value="15" placeholder="Enter number of years">
                    </div>

                    <button onclick="calculateSIP()">Calculate</button>

                    <div class="info-box">
                        <span class="info-icon">‚ÑπÔ∏è</span>
                        Systematic Investment Plan with compound growth
                    </div>
                </div>

                <div class="card">
                    <h2>üìà SIP Summary</h2>
                    
                    <div class="sip-stats">
                        <div class="sip-stat-box">
                            <div class="sip-stat-label">Total Invested</div>
                            <div class="sip-stat-value" id="totalInvested">‚Çπ27,00,000</div>
                            <div class="sip-stat-subtext">15 years √ó ‚Çπ15,000</div>
                        </div>
                        <div class="sip-stat-box">
                            <div class="sip-stat-label">Final Value</div>
                            <div class="sip-stat-value positive" id="sipFinalValue">‚Çπ82,77,405</div>
                            <div class="sip-stat-subtext">At 15% returns</div>
                        </div>
                        <div class="sip-stat-box">
                            <div class="sip-stat-label">Total Gains</div>
                            <div class="sip-stat-value positive" id="sipGains">+‚Çπ55,77,405</div>
                            <div class="sip-stat-subtext">+206.58%</div>
                        </div>
                        <div class="sip-stat-box">
                            <div class="sip-stat-label">Average Annual Return</div>
                            <div class="sip-stat-value positive" id="sipAvgReturn">‚Çπ37,18,494</div>
                            <div class="sip-stat-subtext">Per year average</div>
                        </div>
                    </div>

                    <div class="info-box">
                        <span class="info-icon">üí°</span>
                        Power of compound interest: Your investments grow exponentially over time with consistent monthly contributions
                    </div>
                </div>
            </div>

            <div class="chart-container">
                <h2>üìä SIP Value Growth Over Time</h2>
                <div style="position: relative; height: 400px;">
                    <canvas id="sipGrowthChart"></canvas>
                </div>
            </div>

            <div class="chart-container">
                <h2>üéØ Contribution vs Gains</h2>
                <div style="position: relative; height: 400px;">
                    <canvas id="sipCompositionChart"></canvas>
                </div>
            </div>

            <div class="table-container">
                <h2>üìã Year-by-Year SIP Breakdown</h2>
                <table>
                    <thead>
                        <tr>
                            <th>Year</th>
                            <th>Annual Investment (‚Çπ)</th>
                            <th>Total Invested (‚Çπ)</th>
                            <th>Portfolio Value (‚Çπ)</th>
                            <th>Total Gains (‚Çπ)</th>
                            <th>Gain %</th>
                        </tr>
                    </thead>
                    <tbody id="sipTableBody">
                    </tbody>
                </table>
            </div>
        </div>

        <!-- TAB 4: 4% RULE RETIREMENT CALCULATOR -->
        <div id="4percent-tab" class="tab-content">
            <div class="main-content">
                <div class="card">
                    <h2>üéØ Retirement Planning Input</h2>
                    
                    <div class="input-group">
                        <label for="retirementMonthlyExpense">Current Monthly Expenses (‚Çπ)</label>
                        <input type="number" id="retirementMonthlyExpense" value="50000" placeholder="Enter monthly expenses">
                    </div>

                    <div class="input-group">
                        <label for="retirementInflation">Expected Annual Inflation (%)</label>
                        <input type="number" id="retirementInflation" value="6" step="0.1" placeholder="Enter inflation rate">
                    </div>

                    <div class="input-group">
                        <label for="yearsToRetirement">Years to Retirement</label>
                        <input type="number" id="yearsToRetirement" value="15" placeholder="Enter years to retirement">
                    </div>

                    <button onclick="calculateRetirementPlan()">Calculate Retirement Corpus</button>

                    <div class="info-box">
                        <span class="info-icon">‚ÑπÔ∏è</span>
                        Formula: Required Corpus = (Final Monthly Expense √ó 12) √∑ 0.04
                    </div>
                </div>

                <div class="card">
                    <h2>üìà Retirement Summary</h2>
                    
                    <div class="retirement-stats">
                        <div class="retirement-stat-box">
                            <div class="retirement-stat-label">Today's Monthly</div>
                            <div class="retirement-stat-value" id="retirementTodayMonthly">‚Çπ50,000</div>
                            <div class="retirement-stat-subtext">Today's expenses</div>
                        </div>
                        <div class="retirement-stat-box">
                            <div class="retirement-stat-label">After 15 Years</div>
                            <div class="retirement-stat-value positive" id="retirementFinalMonthly">‚Çπ65,818</div>
                            <div class="retirement-stat-subtext">At retirement (6% inflation)</div>
                        </div>
                        <div class="retirement-stat-box">
                            <div class="retirement-stat-label">Required Corpus</div>
                            <div class="retirement-stat-value highlight" id="requiredCorpus">‚Çπ1,97,45,400</div>
                            <div class="retirement-stat-subtext">Using 4% Rule</div>
                        </div>
                        <div class="retirement-stat-box">
                            <div class="retirement-stat-label">Annual Withdrawal</div>
                            <div class="retirement-stat-value positive" id="annualWithdrawal">‚Çπ78,98,160</div>
                            <div class="retirement-stat-subtext">4% of corpus</div>
                        </div>
                    </div>

                    <div class="formula-box">
                        <div class="formula-label">üìê Calculation Breakdown:</div>
                        <div class="formula-text" id="formulaBreakdown"></div>
                    </div>
                </div>
            </div>

            <div class="chart-container">
                <h2>üìä Expense Growth Until Retirement</h2>
                <div style="position: relative; height: 400px;">
                    <canvas id="retirementExpenseChart"></canvas>
                </div>
            </div>

            <div class="chart-container">
                <h2>üí∞ Corpus Required vs Current Expenses</h2>
                <div style="position: relative; height: 400px;">
                    <canvas id="corpusComparison"></canvas>
                </div>
            </div>

            <div class="table-container">
                <h2>üìã Year-by-Year Expense Growth Until Retirement</h2>
                <div class="table-scroll">
                    <table>
                        <thead>
                            <tr>
                                <th>Year</th>
                                <th>Monthly Expense (‚Çπ)</th>
                                <th>Annual Expense (‚Çπ)</th>
                                <th>Cumulative Expense (‚Çπ)</th>
                                <th>% Growth</th>
                            </tr>
                        </thead>
                        <tbody id="retirementTableBody">
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>

    <script>
        let depreciationChart = null;
        let annualChart = null;
        let expenseGrowthChart = null;
        let annualExpenseChart = null;
        let sipGrowthChart = null;
        let sipCompositionChart = null;
        let retirementExpenseChart = null;
        let corpusComparisonChart = null;

        function switchTab(tabName) {
            const tabs = document.querySelectorAll('.tab-content');
            tabs.forEach(tab => tab.classList.remove('active'));

            const buttons = document.querySelectorAll('.tab-button');
            buttons.forEach(btn => btn.classList.remove('active'));

            document.getElementById(tabName).classList.add('active');
            event.target.classList.add('active');

            setTimeout(() => {
                if (depreciationChart) depreciationChart.resize();
                if (annualChart) annualChart.resize();
                if (expenseGrowthChart) expenseGrowthChart.resize();
                if (annualExpenseChart) annualExpenseChart.resize();
                if (sipGrowthChart) sipGrowthChart.resize();
                if (sipCompositionChart) sipCompositionChart.resize();
                if (retirementExpenseChart) retirementExpenseChart.resize();
                if (corpusComparisonChart) corpusComparisonChart.resize();
            }, 100);
        }

        function formatCurrency(value) {
            return new Intl.NumberFormat('en-IN', {
                style: 'currency',
                currency: 'INR',
                minimumFractionDigits: 0,
                maximumFractionDigits: 0
            }).format(value);
        }

        // ===== CORPUS DEPRECIATION FUNCTIONS =====
        function calculateInflation() {
            const corpus = parseFloat(document.getElementById('corpus').value) || 0;
            const inflationRate = parseFloat(document.getElementById('inflation').value) || 0;
            const years = parseInt(document.getElementById('years').value) || 0;

            if (corpus <= 0 || years <= 0) {
                alert('Please enter valid positive values');
                return;
            }

            const realValue = corpus / Math.pow(1 + inflationRate / 100, years);
            const inflationLoss = corpus - realValue;
            const lossPercentage = (inflationLoss / corpus) * 100;

            document.getElementById('initialValue').textContent = formatCurrency(corpus);
            document.getElementById('futureValue').textContent = formatCurrency(realValue);
            document.getElementById('inflationLoss').textContent = 
                `${formatCurrency(inflationLoss)} ${lossPercentage > 0 ? '‚ùå' : '‚úÖ'}`;
            document.getElementById('lossPercentage').textContent = `-${lossPercentage.toFixed(2)}%`;

            const yearData = [];
            for (let year = 0; year <= years; year++) {
                const nominalValue = corpus;
                const realVal = corpus / Math.pow(1 + inflationRate / 100, year);
                const cumLoss = corpus - realVal;
                const cumLossPercent = (cumLoss / corpus) * 100;

                yearData.push({
                    year,
                    nominal: nominalValue,
                    real: realVal,
                    cumulativeLoss: cumLoss,
                    lossPercent: cumLossPercent
                });
            }

            updateCorpusTable(yearData);
            updateCorpusCharts(yearData, corpus);
        }

        function updateCorpusTable(data) {
            const tbody = document.getElementById('tableBody');
            tbody.innerHTML = '';

            data.forEach(row => {
                const tr = document.createElement('tr');
                const lossClass = row.year === 0 ? '' : 'negative';
                
                tr.innerHTML = `
                    <td><strong>${row.year}</strong></td>
                    <td>${formatCurrency(row.nominal)}</td>
                    <td class="highlight">${formatCurrency(row.real)}</td>
                    <td class="${lossClass}">${formatCurrency(row.cumulativeLoss)}</td>
                    <td class="${lossClass}">${row.lossPercent.toFixed(2)}%</td>
                `;
                tbody.appendChild(tr);
            });
        }

        function updateCorpusCharts(data, corpus) {
            const years = data.map(d => d.year);
            const realValues = data.map(d => d.real);
            const losses = data.map(d => d.cumulativeLoss);

            if (depreciationChart) {
                depreciationChart.destroy();
            }
            
            const ctx1 = document.getElementById('depreciationChart').getContext('2d');
            depreciationChart = new Chart(ctx1, {
                type: 'line',
                data: {
                    labels: years,
                    datasets: [
                        {
                            label: 'Real Value (Purchasing Power)',
                            data: realValues,
                            borderColor: '#00ff88',
                            backgroundColor: 'rgba(0, 255, 136, 0.1)',
                            borderWidth: 3,
                            fill: true,
                            tension: 0.4,
                            pointBackgroundColor: '#00ff88',
                            pointBorderColor: '#00d4ff',
                            pointRadius: 5,
                            pointHoverRadius: 7
                        },
                        {
                            label: 'Nominal Value (Static)',
                            data: Array(years.length).fill(corpus),
                            borderColor: '#00d4ff',
                            borderWidth: 2,
                            borderDash: [5, 5],
                            fill: false,
                            pointRadius: 0,
                            tension: 0
                        }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            labels: {
                                color: '#e0e0e0',
                                font: { size: 12 },
                                padding: 15
                            }
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: false,
                            ticks: { color: '#888' },
                            grid: { color: '#333' }
                        },
                        x: {
                            ticks: { color: '#888' },
                            grid: { color: '#333' }
                        }
                    }
                }
            });

            if (annualChart) {
                annualChart.destroy();
            }

            const ctx2 = document.getElementById('annualChart').getContext('2d');
            annualChart = new Chart(ctx2, {
                type: 'bar',
                data: {
                    labels: years,
                    datasets: [{
                        label: 'Cumulative Purchasing Power Loss',
                        data: losses,
                        backgroundColor: 'rgba(255, 68, 68, 0.7)',
                        borderColor: '#ff4444',
                        borderWidth: 2,
                        borderRadius: 4
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            labels: {
                                color: '#e0e0e0',
                                font: { size: 12 },
                                padding: 15
                            }
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            ticks: { color: '#888' },
                            grid: { color: '#333' }
                        },
                        x: {
                            ticks: { color: '#888' },
                            grid: { color: '#333' }
                        }
                    }
                }
            });
        }

        // ===== EXPENSE INFLATION FUNCTIONS =====
        function calculateExpenseInflation() {
            const monthlyExpense = parseFloat(document.getElementById('monthlyExpense').value) || 0;
            const inflationRate = parseFloat(document.getElementById('expenseInflation').value) || 0;
            const years = parseInt(document.getElementById('expenseYears').value) || 0;

            if (monthlyExpense <= 0 || years <= 0) {
                alert('Please enter valid positive values');
                return;
            }

            const futureMonthlyExpense = monthlyExpense * Math.pow(1 + inflationRate / 100, years);
            const monthlyIncrease = futureMonthlyExpense - monthlyExpense;

            const todayAnnual = monthlyExpense * 12;
            const futureAnnual = futureMonthlyExpense * 12;

            let totalCost = 0;
            for (let year = 0; year < years; year++) {
                const yearlyExpense = monthlyExpense * 12 * Math.pow(1 + inflationRate / 100, year);
                totalCost += yearlyExpense;
            }

            document.getElementById('todayMonthly').textContent = formatCurrency(monthlyExpense);
            document.getElementById('todayAnnual').textContent = formatCurrency(todayAnnual);
            document.getElementById('futureMonthly').textContent = formatCurrency(futureMonthlyExpense);
            document.getElementById('futureAnnual').textContent = formatCurrency(futureAnnual);
            document.getElementById('monthlyIncrease').textContent = `+${formatCurrency(monthlyIncrease)}`;
            document.getElementById('totalCost15Yrs').textContent = formatCurrency(totalCost);

            const expenseData = [];
            for (let year = 0; year <= years; year++) {
                const monthlyExp = monthlyExpense * Math.pow(1 + inflationRate / 100, year);
                const annualExp = monthlyExp * 12;
                const increaseFromToday = ((monthlyExp - monthlyExpense) / monthlyExpense) * 100;
                
                let cumulativeCost = 0;
                for (let y = 0; y <= year; y++) {
                    cumulativeCost += monthlyExpense * 12 * Math.pow(1 + inflationRate / 100, y);
                }

                expenseData.push({
                    year,
                    monthly: monthlyExp,
                    annual: annualExp,
                    increase: increaseFromToday,
                    cumulative: cumulativeCost
                });
            }

            updateExpenseTable(expenseData);
            updateExpenseCharts(expenseData, monthlyExpense);
        }

        function updateExpenseTable(data) {
            const tbody = document.getElementById('expenseTableBody');
            tbody.innerHTML = '';

            data.forEach(row => {
                const tr = document.createElement('tr');
                const increaseClass = row.year === 0 ? '' : 'warning';
                
                tr.innerHTML = `
                    <td><strong>${row.year}</strong></td>
                    <td>${formatCurrency(row.monthly)}</td>
                    <td class="highlight">${formatCurrency(row.annual)}</td>
                    <td class="${increaseClass}">${row.increase.toFixed(2)}%</td>
                    <td>${formatCurrency(row.cumulative)}</td>
                `;
                tbody.appendChild(tr);
            });
        }

        function updateExpenseCharts(data, monthlyExpense) {
            const years = data.map(d => d.year);
            const monthlyExpenses = data.map(d => d.monthly);
            const annualExpenses = data.map(d => d.annual);
            const staticMonthly = Array(years.length).fill(monthlyExpense);
            const staticAnnual = Array(years.length).fill(monthlyExpense * 12);

            if (expenseGrowthChart) {
                expenseGrowthChart.destroy();
            }

            const ctx1 = document.getElementById('expenseGrowthChart').getContext('2d');
            expenseGrowthChart = new Chart(ctx1, {
                type: 'line',
                data: {
                    labels: years,
                    datasets: [
                        {
                            label: 'Actual Monthly Expense',
                            data: monthlyExpenses,
                            borderColor: '#ff9800',
                            backgroundColor: 'rgba(255, 152, 0, 0.1)',
                            borderWidth: 3,
                            fill: true,
                            tension: 0.4,
                            pointBackgroundColor: '#ff9800',
                            pointBorderColor: '#ffb74d',
                            pointRadius: 5,
                            pointHoverRadius: 7
                        },
                        {
                            label: 'Today\'s Monthly Expense',
                            data: staticMonthly,
                            borderColor: '#00d4ff',
                            borderWidth: 2,
                            borderDash: [5, 5],
                            fill: false,
                            pointRadius: 0,
                            tension: 0
                        }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            labels: {
                                color: '#e0e0e0',
                                font: { size: 12 },
                                padding: 15
                            }
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: false,
                            ticks: { color: '#888' },
                            grid: { color: '#333' }
                        },
                        x: {
                            ticks: { color: '#888' },
                            grid: { color: '#333' }
                        }
                    }
                }
            });

            if (annualExpenseChart) {
                annualExpenseChart.destroy();
            }

            const ctx2 = document.getElementById('annualExpenseChart').getContext('2d');
            annualExpenseChart = new Chart(ctx2, {
                type: 'bar',
                data: {
                    labels: years,
                    datasets: [
                        {
                            label: 'Actual Annual Expense',
                            data: annualExpenses,
                            backgroundColor: 'rgba(255, 152, 0, 0.7)',
                            borderColor: '#ff9800',
                            borderWidth: 2,
                            borderRadius: 4
                        },
                        {
                            label: 'Today\'s Annual Expense',
                            data: staticAnnual,
                            backgroundColor: 'rgba(0, 212, 255, 0.3)',
                            borderColor: '#00d4ff',
                            borderWidth: 2,
                            borderRadius: 4
                        }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            labels: {
                                color: '#e0e0e0',
                                font: { size: 12 },
                                padding: 15
                            }
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            ticks: { color: '#888' },
                            grid: { color: '#333' }
                        },
                        x: {
                            ticks: { color: '#888' },
                            grid: { color: '#333' }
                        }
                    }
                }
            });
        }

        // ===== SIP CALCULATOR FUNCTIONS =====
        function calculateSIP() {
            const sipAmount = parseFloat(document.getElementById('sipAmount').value) || 0;
            const expectedReturn = parseFloat(document.getElementById('expectedReturn').value) || 0;
            const years = parseInt(document.getElementById('sipYears').value) || 0;

            if (sipAmount <= 0 || expectedReturn < 0 || years <= 0) {
                alert('Please enter valid positive values');
                return;
            }

            const monthlyRate = expectedReturn / 100 / 12;
            const months = years * 12;
            
            let portfolioValue = 0;
            for (let month = 1; month <= months; month++) {
                portfolioValue = (portfolioValue + sipAmount) * (1 + monthlyRate);
            }

            const totalInvested = sipAmount * months;
            const totalGains = portfolioValue - totalInvested;
            const avgAnnualReturn = totalGains / years;

            document.getElementById('totalInvested').textContent = formatCurrency(totalInvested);
            document.getElementById('sipFinalValue').textContent = formatCurrency(portfolioValue);
            document.getElementById('sipGains').textContent = `+${formatCurrency(totalGains)}`;
            document.getElementById('sipAvgReturn').textContent = formatCurrency(avgAnnualReturn);

            const sipData = [];
            for (let year = 0; year <= years; year++) {
                let yearEndValue = 0;
                const monthsInPeriod = year * 12;

                for (let month = 1; month <= monthsInPeriod; month++) {
                    yearEndValue = (yearEndValue + sipAmount) * (1 + monthlyRate);
                }

                const yearInvested = sipAmount * 12 * year;
                const yearGains = yearEndValue - yearInvested;
                const yearGainPercent = yearInvested > 0 ? (yearGains / yearInvested) * 100 : 0;

                sipData.push({
                    year,
                    annual: sipAmount * 12,
                    totalInvested: yearInvested,
                    portfolioValue: yearEndValue,
                    totalGains: yearGains,
                    gainPercent: yearGainPercent
                });
            }

            updateSIPTable(sipData);
            updateSIPCharts(sipData, totalInvested, portfolioValue);
        }

        function updateSIPTable(data) {
            const tbody = document.getElementById('sipTableBody');
            tbody.innerHTML = '';

            data.forEach(row => {
                const tr = document.createElement('tr');
                
                tr.innerHTML = `
                    <td><strong>${row.year}</strong></td>
                    <td>${formatCurrency(row.annual)}</td>
                    <td>${formatCurrency(row.totalInvested)}</td>
                    <td class="highlight">${formatCurrency(row.portfolioValue)}</td>
                    <td class="positive">${formatCurrency(row.totalGains)}</td>
                    <td class="positive">${row.gainPercent.toFixed(2)}%</td>
                `;
                tbody.appendChild(tr);
            });
        }

        function updateSIPCharts(data, totalInvested, finalValue) {
            const years = data.map(d => d.year);
            const portfolioValues = data.map(d => d.portfolioValue);
            const investedAmounts = data.map(d => d.totalInvested);
            const gains = data.map(d => d.totalGains);

            if (sipGrowthChart) {
                sipGrowthChart.destroy();
            }

            const ctx1 = document.getElementById('sipGrowthChart').getContext('2d');
            sipGrowthChart = new Chart(ctx1, {
                type: 'line',
                data: {
                    labels: years,
                    datasets: [
                        {
                            label: 'Portfolio Value',
                            data: portfolioValues,
                            borderColor: '#00ff88',
                            backgroundColor: 'rgba(0, 255, 136, 0.1)',
                            borderWidth: 3,
                            fill: true,
                            tension: 0.4,
                            pointBackgroundColor: '#00ff88',
                            pointBorderColor: '#00d4ff',
                            pointRadius: 5,
                            pointHoverRadius: 7
                        },
                        {
                            label: 'Total Invested',
                            data: investedAmounts,
                            borderColor: '#ff9800',
                            backgroundColor: 'rgba(255, 152, 0, 0.1)',
                            borderWidth: 3,
                            fill: true,
                            tension: 0.4,
                            pointBackgroundColor: '#ff9800',
                            pointBorderColor: '#ffb74d',
                            pointRadius: 5,
                            pointHoverRadius: 7
                        }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            labels: {
                                color: '#e0e0e0',
                                font: { size: 12 },
                                padding: 15
                            }
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            ticks: { color: '#888' },
                            grid: { color: '#333' }
                        },
                        x: {
                            ticks: { color: '#888' },
                            grid: { color: '#333' }
                        }
                    }
                }
            });

            if (sipCompositionChart) {
                sipCompositionChart.destroy();
            }

            const ctx2 = document.getElementById('sipCompositionChart').getContext('2d');
            sipCompositionChart = new Chart(ctx2, {
                type: 'bar',
                data: {
                    labels: years,
                    datasets: [
                        {
                            label: 'Total Invested',
                            data: investedAmounts,
                            backgroundColor: 'rgba(255, 152, 0, 0.7)',
                            borderColor: '#ff9800',
                            borderWidth: 2,
                            borderRadius: 4
                        },
                        {
                            label: 'Gains from Returns',
                            data: gains,
                            backgroundColor: 'rgba(0, 255, 136, 0.7)',
                            borderColor: '#00ff88',
                            borderWidth: 2,
                            borderRadius: 4
                        }
                    ]
                },
                options: {
                    indexAxis: 'x',
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            labels: {
                                color: '#e0e0e0',
                                font: { size: 12 },
                                padding: 15
                            }
                        }
                    },
                    scales: {
                        x: {
                            stacked: true,
                            ticks: { color: '#888' },
                            grid: { color: '#333' }
                        },
                        y: {
                            stacked: true,
                            ticks: { color: '#888' },
                            grid: { color: '#333' }
                        }
                    }
                }
            });
        }

        // ===== 4% RULE RETIREMENT CALCULATOR =====
        function calculateRetirementPlan() {
            const monthlyExpense = parseFloat(document.getElementById('retirementMonthlyExpense').value) || 0;
            const inflationRate = parseFloat(document.getElementById('retirementInflation').value) || 0;
            const yearsToRetirement = parseInt(document.getElementById('yearsToRetirement').value) || 0;

            if (monthlyExpense <= 0 || yearsToRetirement <= 0) {
                alert('Please enter valid positive values');
                return;
            }

            // Calculate final monthly expense at retirement
            const finalMonthlyExpense = monthlyExpense * Math.pow(1 + inflationRate / 100, yearsToRetirement);
            const finalAnnualExpense = finalMonthlyExpense * 12;

            // Apply 4% rule: Corpus = Annual Expense / 0.04
            const requiredCorpus = finalAnnualExpense / 0.04;
            const yearlyWithdrawal = requiredCorpus * 0.04;

            // Update summary
            document.getElementById('retirementTodayMonthly').textContent = formatCurrency(monthlyExpense);
            document.getElementById('retirementFinalMonthly').textContent = formatCurrency(finalMonthlyExpense);
            document.getElementById('requiredCorpus').textContent = formatCurrency(requiredCorpus);
            document.getElementById('annualWithdrawal').textContent = formatCurrency(yearlyWithdrawal);

            // Update formula breakdown
            const formulaHTML = `
                <div>Step 1: Calculate final monthly expense at retirement:</div>
                <div style="margin: 10px 0; color: #ffb74d;">
                    ‚Çπ${monthlyExpense.toLocaleString('en-IN')} √ó (1 + ${inflationRate}%)^${yearsToRetirement} = ${formatCurrency(finalMonthlyExpense)}
                </div>
                
                <div style="margin-top: 15px;">Step 2: Calculate annual expense at retirement:</div>
                <div style="margin: 10px 0; color: #ffb74d;">
                    ${formatCurrency(finalMonthlyExpense)} √ó 12 = ${formatCurrency(finalAnnualExpense)}
                </div>
                
                <div style="margin-top: 15px;">Step 3: Apply 4% Rule to find required corpus:</div>
                <div style="margin: 10px 0; color: #ffb74d;">
                    (${formatCurrency(finalAnnualExpense)} √∑ 0.04) = <strong>${formatCurrency(requiredCorpus)}</strong>
                </div>
                
                <div style="margin-top: 15px;">Step 4: Annual withdrawal (4% of corpus):</div>
                <div style="margin: 10px 0; color: #ffb74d;">
                    ${formatCurrency(requiredCorpus)} √ó 0.04 = <strong>${formatCurrency(yearlyWithdrawal)}</strong>
                </div>
            `;
            document.getElementById('formulaBreakdown').innerHTML = formulaHTML;

            // Generate year-by-year data
            const yearData = [];
            let cumulativeExpense = 0;

            for (let year = 0; year <= yearsToRetirement; year++) {
                const monthlyExp = monthlyExpense * Math.pow(1 + inflationRate / 100, year);
                const annualExp = monthlyExp * 12;
                const growthPercent = ((monthlyExp - monthlyExpense) / monthlyExpense) * 100;
                cumulativeExpense += annualExp;

                yearData.push({
                    year,
                    monthly: monthlyExp,
                    annual: annualExp,
                    growth: growthPercent,
                    cumulative: cumulativeExpense
                });
            }

            updateRetirementTable(yearData);
            updateRetirementCharts(yearData, monthlyExpense, finalMonthlyExpense, requiredCorpus);
        }

        function updateRetirementTable(data) {
            const tbody = document.getElementById('retirementTableBody');
            tbody.innerHTML = '';

            data.forEach(row => {
                const tr = document.createElement('tr');
                const growthClass = row.year === 0 ? '' : 'warning';
                
                tr.innerHTML = `
                    <td><strong>Year ${row.year}</strong></td>
                    <td>${formatCurrency(row.monthly)}</td>
                    <td class="highlight">${formatCurrency(row.annual)}</td>
                    <td>${formatCurrency(row.cumulative)}</td>
                    <td class="${growthClass}">${row.growth.toFixed(2)}%</td>
                `;
                tbody.appendChild(tr);
            });
        }

        function updateRetirementCharts(yearData, todayMonthly, finalMonthly, corpus) {
            const years = yearData.map(d => d.year);
            const monthlyExpenses = yearData.map(d => d.monthly);
            const annualExpenses = yearData.map(d => d.annual);

            // Expense Growth Chart
            if (retirementExpenseChart) {
                retirementExpenseChart.destroy();
            }

            const ctx1 = document.getElementById('retirementExpenseChart').getContext('2d');
            retirementExpenseChart = new Chart(ctx1, {
                type: 'line',
                data: {
                    labels: years,
                    datasets: [{
                        label: 'Monthly Expense (Inflation Adjusted)',
                        data: monthlyExpenses,
                        borderColor: '#ff9800',
                        backgroundColor: 'rgba(255, 152, 0, 0.1)',
                        borderWidth: 3,
                        fill: true,
                        tension: 0.4,
                        pointBackgroundColor: '#ff9800',
                        pointBorderColor: '#ffb74d',
                        pointRadius: 5,
                        pointHoverRadius: 7
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            labels: {
                                color: '#e0e0e0',
                                font: { size: 12 },
                                padding: 15
                            }
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: false,
                            ticks: { color: '#888' },
                            grid: { color: '#333' }
                        },
                        x: {
                            ticks: { color: '#888' },
                            grid: { color: '#333' }
                        }
                    }
                }
            });

            // Corpus Comparison Chart
            if (corpusComparisonChart) {
                corpusComparisonChart.destroy();
            }

            const ctx2 = document.getElementById('corpusComparison').getContext('2d');
            corpusComparisonChart = new Chart(ctx2, {
                type: 'bar',
                data: {
                    labels: ['Today\'s Annual\nExpenses', 'At Retirement\n(Inflation Adjusted)', 'Required Corpus\n(4% Rule)'],
                    datasets: [{
                        label: 'Amount (‚Çπ)',
                        data: [
                            todayMonthly * 12,
                            finalMonthly * 12,
                            corpus
                        ],
                        backgroundColor: ['rgba(0, 212, 255, 0.7)', 'rgba(255, 152, 0, 0.7)', 'rgba(0, 255, 136, 0.7)'],
                        borderColor: ['#00d4ff', '#ff9800', '#00ff88'],
                        borderWidth: 2,
                        borderRadius: 4
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    indexAxis: 'x',
                    plugins: {
                        legend: {
                            labels: {
                                color: '#e0e0e0',
                                font: { size: 12 },
                                padding: 15
                            }
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            ticks: { color: '#888' },
                            grid: { color: '#333' }
                        },
                        x: {
                            ticks: { color: '#888' },
                            grid: { color: '#333' }
                        }
                    }
                }
            });
        }

        // Add event listeners
        document.getElementById('corpus').addEventListener('change', calculateInflation);
        document.getElementById('inflation').addEventListener('change', calculateInflation);
        document.getElementById('years').addEventListener('change', calculateInflation);

        document.getElementById('monthlyExpense').addEventListener('change', calculateExpenseInflation);
        document.getElementById('expenseInflation').addEventListener('change', calculateExpenseInflation);
        document.getElementById('expenseYears').addEventListener('change', calculateExpenseInflation);

        document.getElementById('sipAmount').addEventListener('change', calculateSIP);
        document.getElementById('expectedReturn').addEventListener('change', calculateSIP);
        document.getElementById('sipYears').addEventListener('change', calculateSIP);

        document.getElementById('retirementMonthlyExpense').addEventListener('change', calculateRetirementPlan);
        document.getElementById('retirementInflation').addEventListener('change', calculateRetirementPlan);
        document.getElementById('yearsToRetirement').addEventListener('change', calculateRetirementPlan);

        // Initial calculations
        calculateInflation();
        calculateExpenseInflation();
        calculateSIP();
        calculateRetirementPlan();
    </script>
</body>
</html>
